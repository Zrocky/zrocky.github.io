<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Zrocky</title>
    <description>Think Different</description>
    <link>http://zrocky.com/</link>
    <atom:link href="http://zrocky.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Fri, 09 Jun 2023 16:12:49 +0800</pubDate>
    <lastBuildDate>Fri, 09 Jun 2023 16:12:49 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>Shell常用命令</title>
        <description>&lt;p&gt;&lt;strong&gt;shell获取路径各部分&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;directory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;dirname &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fullfile&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;basename &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fullfile&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;extension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;##*.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%.*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;编码转换&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;iconv -c -f GB2312 -t UTF-8 &lt;span class=&quot;nv&quot;&gt;$source_filepath&lt;/span&gt; &amp;gt; &lt;span class=&quot;nv&quot;&gt;$out_filepath&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Fri, 06 Nov 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/11/shell-command/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/11/shell-command/</guid>
        
        <category>shell</category>
        
        
        <category>Development</category>
        
      </item>
    
      <item>
        <title>SRS使用</title>
        <description>&lt;p&gt;&lt;strong&gt;&amp;gt;&amp;gt;&amp;gt; Install docker&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Download docker from &lt;a href=&quot;https://www.docker.com/products/docker-desktop&quot;&gt;here&lt;/a&gt; then start docker.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&amp;gt;&amp;gt;&amp;gt; Clone SRS&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://gitee.com/winlinvip/srs.oschina.git srs &amp;amp;&amp;amp;
cd srs &amp;amp;&amp;amp; git remote set-url origin https://github.com/ossrs/srs.git &amp;amp;&amp;amp; git pull
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note: Please read &lt;a href=&quot;https://github.com/ossrs/srs#usage&quot;&gt;https://github.com/ossrs/srs#usage&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;&amp;gt;&amp;gt;&amp;gt; Start docker&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -it --name=srs -v `pwd`:/tmp/srs -w /tmp/srs/trunk -p 1935:1935 \
  -p 1985:1985 -p 8080:8080 -p 8085:8085 registry.cn-hangzhou.aliyuncs.com/ossrs/srs:dev bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note: We use &lt;a href=&quot;https://cr.console.aliyun.com/&quot;&gt;AliyunCR&lt;/a&gt;, you can directly use &lt;code class=&quot;highlighter-rouge&quot;&gt;ossrs/srs:dev&lt;/code&gt; instead.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Build SRS in docker&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./configure &amp;amp;&amp;amp; make
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Run SRS in docker&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./objs/srs -c conf/console.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/use-srs/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/use-srs/</guid>
        
        <category>docker</category>
        
        <category>framework</category>
        
        
        <category>Development</category>
        
      </item>
    
      <item>
        <title>map与flatMap和compactMap的区别</title>
        <description>&lt;p&gt;Swift在&lt;em&gt;4.1&lt;/em&gt;版本之前只有&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;flatMap&lt;/code&gt;函数，之后引入了&lt;code class=&quot;highlighter-rouge&quot;&gt;compactMap&lt;/code&gt;函数，但是&lt;code class=&quot;highlighter-rouge&quot;&gt;compactMap&lt;/code&gt;函数并不是实现新的功能，而是用来解决&lt;code class=&quot;highlighter-rouge&quot;&gt;flatMap&lt;/code&gt;函数功能不唯一的问题。原先&lt;code class=&quot;highlighter-rouge&quot;&gt;flatMap&lt;/code&gt;函数既有去除nil的功能，也能将多维数组降维成一维，这违背了函数设计的单一职责原则，所以 Swift &lt;em&gt;4.1&lt;/em&gt;以后，使用&lt;code class=&quot;highlighter-rouge&quot;&gt;flatMap&lt;/code&gt;函数只解决降维问题，去除nil的功能由新引入的&lt;code class=&quot;highlighter-rouge&quot;&gt;compactMap&lt;/code&gt;函数完成。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;map函数&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;逐个处理数组中的元素，并生成新数组&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;complactMap函数&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;函数一致，只是当结果返回nil时，新数组会去除这一项&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/image-20200423120104137.png&quot; alt=&quot;image-20200423120104137&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;flatMap函数&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;函数一致，但当原数组是多维数组时，新数组只会返回一维数组&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/image-20200423120137384.png&quot; alt=&quot;image-20200423120137384&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/map-flatmap-compactmap/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/map-flatmap-compactmap/</guid>
        
        <category>Swift</category>
        
        <category>函数</category>
        
        
        <category>iOS</category>
        
      </item>
    
      <item>
        <title>iOS项目使用Universal Links</title>
        <description>&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;Universal Links&lt;/code&gt;来取代&lt;code class=&quot;highlighter-rouge&quot;&gt;Scheme&lt;/code&gt;的跳转App功能，有更好的安全性（第三方不能使用这种方法跳转你的App），且不会弹出跳转确认框。可以查看&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1&quot;&gt;官方文档 &lt;/a&gt;获取更详细的介绍。&lt;/p&gt;

&lt;p&gt;要使用&lt;code class=&quot;highlighter-rouge&quot;&gt;Universal Links&lt;/code&gt;，首先需要一个网站，该网站必须使用&lt;code class=&quot;highlighter-rouge&quot;&gt;https&lt;/code&gt;协议（存疑，我使用http跳转也能成功），然后按以下步骤操作：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;创建一个无后缀文件，文件名为&lt;code class=&quot;highlighter-rouge&quot;&gt;apple-app-site-association&lt;/code&gt;，写入以下信息：&lt;/p&gt;

    &lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;applinks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;apps&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;details&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;s2&quot;&gt;&quot;appID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;9JA89QQLNQ.com.apple.wwdc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s2&quot;&gt;&quot;paths&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/wwdc/news/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/videos/wwdc/2015/*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;s2&quot;&gt;&quot;appID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ABCD1234.com.apple.wwdc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s2&quot;&gt;&quot;paths&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;

    &lt;blockquote&gt;
      &lt;p&gt;其中&lt;code class=&quot;highlighter-rouge&quot;&gt;appID&lt;/code&gt;是一个App的唯一标识，写入格式为&lt;code class=&quot;highlighter-rouge&quot;&gt;{TeamID}.{App BundleIdentifier}&lt;/code&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;path&lt;/code&gt;是网站的目录，可写入多个，&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;作为通配符使用&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;将&lt;code class=&quot;highlighter-rouge&quot;&gt;apple-app-site-association&lt;/code&gt;文件上传至你网站的根目录或者&lt;code class=&quot;highlighter-rouge&quot;&gt;.well-known&lt;/code&gt;目录，上传成功，此文件应可以直接下载（该文件配置好后，需要等待一段时间才会生效）&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在开发证书页面中勾选应用ID的&lt;code class=&quot;highlighter-rouge&quot;&gt;Associated Domains&lt;/code&gt;权限，并正确安装该应用的&lt;code class=&quot;highlighter-rouge&quot;&gt;Profile&lt;/code&gt;文件&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/assets/images/post/image-20200325143312973.png&quot; alt=&quot;image-20200325143312973&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在Xcode中配置应用的&lt;code class=&quot;highlighter-rouge&quot;&gt;Associated Domains&lt;/code&gt;，前缀必须是&lt;code class=&quot;highlighter-rouge&quot;&gt;applinks:&lt;/code&gt;，接着加上你的网站域名&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/assets/images/post/image-20200325143736941.png&quot; alt=&quot;image-20200325143736941&quot; /&gt;&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;p&gt;网站域名可使用通配符&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;，例如&lt;code class=&quot;highlighter-rouge&quot;&gt;*.apple.com&lt;/code&gt;&lt;/p&gt;

      &lt;p&gt;域名匹配规则是取较长的字符串，所以&lt;code class=&quot;highlighter-rouge&quot;&gt;*.apple.com&lt;/code&gt;是匹配不到&lt;code class=&quot;highlighter-rouge&quot;&gt;apple.com&lt;/code&gt;的，这点需要注意&lt;/p&gt;

      &lt;p&gt;如果有多个网站，则可以添加多条&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;当从网站跳转App时，iOS将会通知App，并且传递了一个&lt;code class=&quot;highlighter-rouge&quot;&gt;NSUserActivity&lt;/code&gt;对象，该对象包含了用户正在访问的web链接&lt;code class=&quot;highlighter-rouge&quot;&gt;webpageURL&lt;/code&gt;，实现&lt;code class=&quot;highlighter-rouge&quot;&gt;AppDelegate&lt;/code&gt;的代理方法，可以拦截到该事件：&lt;/p&gt;

    &lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;userActivity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSUserActivity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;restorationHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;@escaping&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;UIUserActivityRestoring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]?)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;current url is &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userActivity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webpageURL&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/ios-use-universal-links/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/ios-use-universal-links/</guid>
        
        <category>应用间跳转</category>
        
        
        <category>iOS</category>
        
      </item>
    
      <item>
        <title>Mac设置Git代理</title>
        <description>&lt;p&gt;&lt;strong&gt;设置git代理：&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;设置github.com走代理&lt;/p&gt;

    &lt;p&gt;编辑&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.gitconfig&lt;/code&gt;文件，添加以下代码：&lt;/p&gt;

    &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[https &quot;https://github.com&quot;]
  proxy = socks5://127.0.0.1:1086
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;设置github.com走IP（效果未验证，可跳过此步骤）&lt;/p&gt;

    &lt;p&gt;编辑&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/hosts&lt;/code&gt;文件，添加以下代码：&lt;/p&gt;

    &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;151.101.72.249 http://global-ssl.fastly.Net
192.30.253.112 http://github.com
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;查看git当前代理设置：**&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config -l
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/image-20200323111441498.png&quot; alt=&quot;image-20200323111441498&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如果出现箭头所指代理，即设置成功&lt;/p&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/git-proxy-setup/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/git-proxy-setup/</guid>
        
        <category>Mac</category>
        
        <category>Git</category>
        
        
        <category>Mac</category>
        
      </item>
    
      <item>
        <title>Git常用命令</title>
        <description>&lt;p&gt;&lt;strong&gt;删除远程分支tag&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;先删除本地仓库tag
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  git tag -d &lt;span class=&quot;nv&quot;&gt;$tagname&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;再删除远程仓库tag
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  git push origin :refs/tags/&lt;span class=&quot;nv&quot;&gt;$tagname&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;查看历史命令&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reflog
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;撤销更改&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;撤销工作区所有更改
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  git checkout .
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;撤销暂存区所有更改
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  git reset HEAD 
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Github提交大文件&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git lfs init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/git-command/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/git-command/</guid>
        
        <category>Git</category>
        
        
        <category>Development</category>
        
      </item>
    
      <item>
        <title>绘图公式</title>
        <description>&lt;p&gt;&lt;strong&gt;圆&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;面积：&lt;img src=&quot;/assets/images/post/image-20200610163937035.png&quot; alt=&quot;image-20200610163937035&quot; /&gt;&lt;/p&gt;

&lt;p&gt;周长：&lt;img src=&quot;/assets/images/post/image-20200610165651297.png&quot; alt=&quot;image-20200610165651297&quot; /&gt;&lt;/p&gt;

&lt;p&gt;求圆心为&lt;em&gt;(a, b)&lt;/em&gt;的圆上点坐标：&lt;img src=&quot;/assets/images/post/image-20200622173643328.png&quot; alt=&quot;image-20200622173643328&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;椭圆&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;求圆心为&lt;em&gt;(h, k)&lt;/em&gt;，长半径为&lt;em&gt;a&lt;/em&gt;、短半径为&lt;em&gt;b&lt;/em&gt;的椭圆上点坐标：&lt;img src=&quot;/assets/images/post/image-20200610171656155.png&quot; alt=&quot;image-20200610171656155&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/draw-formula/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/draw-formula/</guid>
        
        <category>Math</category>
        
        
        <category>Development</category>
        
      </item>
    
      <item>
        <title>Mac设置curl代理</title>
        <description>&lt;p&gt;编辑&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.curlrc&lt;/code&gt;文件，添加以下代码：&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;socks5=127.0.0.1:1086
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/curl-proxy-setup/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/curl-proxy-setup/</guid>
        
        <category>Mac</category>
        
        <category>curl</category>
        
        
        <category>Mac</category>
        
      </item>
    
      <item>
        <title>接入IJKPlayer</title>
        <description>&lt;p&gt;项目地址： https://github.com/bilibili/ijkplayer&lt;/p&gt;

&lt;p&gt;官方Build说明:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/Bilibili/ijkplayer.git ijkplayer-ios
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ijkplayer-ios
git checkout -B latest k0.8.8

./init-ios.sh

&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ios
./compile-ffmpeg.sh clean
./compile-ffmpeg.sh all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;接入过程说明：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;按官方给出说明，到最后一步&lt;code class=&quot;highlighter-rouge&quot;&gt;all&lt;/code&gt;命令时，会报armv7错误，原因可能是XCode不再支持32位系统，解决办法就是修改&lt;code class=&quot;highlighter-rouge&quot;&gt;compile-ffmpeg.sh&lt;/code&gt;文件，将&lt;code class=&quot;highlighter-rouge&quot;&gt;armv7&lt;/code&gt;删除。
  &lt;img src=&quot;%E6%8E%A5%E5%85%A5IJKPlayer.assets/image-20200507164043340.png&quot; alt=&quot;image-20200507164043340&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;接入到自己的项目时，我采用framework形式，所以需要制作静态库，使用&lt;code class=&quot;highlighter-rouge&quot;&gt;IJKMediaPlayer&lt;/code&gt;文件夹中的项目制作；build真机包时，报了&lt;code class=&quot;highlighter-rouge&quot;&gt;avconfig.h&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;config.h&lt;/code&gt;文件not found，找到对应文件，注释&lt;code class=&quot;highlighter-rouge&quot;&gt;includ armv7&lt;/code&gt;行即可。文件位置&lt;code class=&quot;highlighter-rouge&quot;&gt;ios/build/universal/include/libffmpeg/config.h&lt;/code&gt;及&lt;code class=&quot;highlighter-rouge&quot;&gt;ios/build/universal/include/libavutil/avconfig.h&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;%E6%8E%A5%E5%85%A5IJKPlayer.assets/5276080-b6fdc7d5ee1bcfdb.png&quot; alt=&quot;5276080-b6fdc7d5ee1bcfdb&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

</description>
        <pubDate>Wed, 17 Jun 2020 10:49:14 +0800</pubDate>
        <link>http://zrocky.com/2020/06/access-ijkplayer/</link>
        <guid isPermaLink="true">http://zrocky.com/2020/06/access-ijkplayer/</guid>
        
        <category>Framework</category>
        
        
        <category>iOS</category>
        
      </item>
    
      <item>
        <title>使用Git进行版本控制</title>
        <description>&lt;p&gt;公司一直在使用SVN来做版本控制，虽然个人项目早已换成Git，但是对Git没有一个深入的了解，最近因为分支和标签用法的困惑，继而产生想系统学习Git使用的想法，本文是基于&lt;a href=&quot;https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000&quot;&gt;廖雪峰Git教程&lt;/a&gt;而整理的学习笔记。&lt;/p&gt;

&lt;h2 id=&quot;git概念&quot;&gt;Git概念&lt;/h2&gt;

&lt;h3 id=&quot;版本库和工作区&quot;&gt;版本库和工作区&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393197926757.jpg&quot; alt=&quot;版本库和工作区&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;是Git自动创建的第一个分支&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Git&lt;/code&gt;工作分为两步&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git add&lt;/code&gt;把文件修改添加到暂存区
 &lt;img src=&quot;/assets/images/post/2018-10-12-15393198237337.jpg&quot; alt=&quot;git add&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git commit&lt;/code&gt;把暂存区的所有内容提交到当前分支
 &lt;img src=&quot;/assets/images/post/2018-10-12-15393198436289.jpg&quot; alt=&quot;git commit&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;git协议&quot;&gt;Git协议&lt;/h3&gt;

&lt;p&gt;Git支持多种协议，&lt;code class=&quot;highlighter-rouge&quot;&gt;git://&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;https&lt;/code&gt;等，&lt;code class=&quot;highlighter-rouge&quot;&gt;https&lt;/code&gt;协议速度会慢一些&lt;/p&gt;

&lt;h3 id=&quot;专有名词&quot;&gt;专有名词&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;git自动创建的第一个分支&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;HEAD&lt;/code&gt;当前版本&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;origin&lt;/code&gt;远程库&lt;/p&gt;

&lt;h2 id=&quot;基础命令&quot;&gt;基础命令&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;在目录中初始化Git&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git init
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将修改添加到Git&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # 添加全部改动（常用）
 git add .

 # 添加具体变动
 git add file1 file2
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将修改提交&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git commit -m &quot;changelog&quot;
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看仓库当前状态&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git status
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看文件修改内容&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git diff filename
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看Git日志&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # 完整日志（带时间）
 git log
    
 #精简日志
 git log --pretty=oneline
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将当前版本回退（切换）到具体版本&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # 回退到具体版本号（版本号不需要写全，只需前几位）
 git reset --hard commit_id
    
 # 回退到当前版本的上一版本
 git reset --hard HEAD^
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;HEAD表示当前版本
上一个版本就是HEAD\^
上上一个版本就是HEAD\^\^
当然往上100个版本写100个\^比较容易数不过来，所以写成HEAD~100&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;查看历史命令（历史版本号）&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reflog
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;撤销工作区中的修改（使用版本库中的版本替换工作区版本）&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; # “--”很重要，不然会和checkout命令冲突
 git checkout -- filename
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;一种是file自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；&lt;/li&gt;
    &lt;li&gt;一种是file已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;撤销暂存区中的修改&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git reset HEAD filename
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将本地仓库添加到远程库中&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote add origin git@github.com:zrocky/testgit.git
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将本地库中的内容推送到远程库上&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 首次push需添加-u参数
git push -u origin master
    
# 提交到远程库
git push origin master
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;由于远程库是空的，我们第一次推送master分支时，加上了-u参数，Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;从远程库中克隆到本地库&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone git@github.com:zrocky/testgit.git
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;分支与标签&quot;&gt;分支与标签&lt;/h2&gt;

&lt;h3 id=&quot;branch分支&quot;&gt;Branch（分支）&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;为主分支&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;HEAD&lt;/code&gt;指向当前分支&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393228460803.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;每次提交&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;分支都会向前移动一步&lt;/p&gt;
&lt;video controls=&quot;controls&quot; src=&quot;/assets/images/post/master-branch-forward.mp4&quot; width=&quot;100%&quot;&gt;&lt;/video&gt;

&lt;p&gt;创建新的分支&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;，将&lt;code class=&quot;highlighter-rouge&quot;&gt;HEAD&lt;/code&gt;指向&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393233193864.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;从现在开始，工作区的修改和提交就是针对&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支的了&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393233502209.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;假如我们在&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;上的工作完成了，就可以把&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;合并到&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;上&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393233995876.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;合并完分支后，甚至可以删除&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支。删除&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支就是把&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;指针给删掉，删掉后，我们就剩下了一条&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;分支&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393234395115.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;过程动画：&lt;/p&gt;
&lt;video controls=&quot;controls&quot; src=&quot;/assets/images/post/master-and-dev-ff.mp4&quot; width=&quot;100%&quot;&gt;&lt;/video&gt;

&lt;h4 id=&quot;分支命令&quot;&gt;分支命令&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;创建分支&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git branch dev
    
 # 创建并切换分支
 git checkout -b dev
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;切换分支&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git checkout dev
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看当前分支&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git branch
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;合并分支到当前分支&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git merge dev
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;删除分支&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git branch -d dev
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查看分支合并图&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git log --graph
    
 # 显示简化图
 git log --graph --pretty=oneline --abbrev-commit
&lt;/code&gt;&lt;/pre&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;分支合并冲突&quot;&gt;分支合并冲突&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393286280378.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此种情况需解决冲突再提交&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393287303720.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;分支策略&quot;&gt;分支策略&lt;/h4&gt;

&lt;p&gt;如果分支合并没有冲突等异常情况，Git会使用&lt;code class=&quot;highlighter-rouge&quot;&gt;Fast forward（快进）&lt;/code&gt;模式，该模式下，删除分支后，会丢失分支信息&lt;/p&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;--no--ff&lt;/code&gt;参数禁用&lt;code class=&quot;highlighter-rouge&quot;&gt;Fast forward&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git merge --no-ff -m &quot;merge with no-ff&quot; dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/2018-10-12-15393299601183.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;分支开发策略&quot;&gt;分支开发策略&lt;/h5&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;分支是非常稳定的，也就是仅用来发布新版本，平时不在上面工作，开发都在&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支上，每个人再有自己的分支，按时向&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支合并即可，团队合作的分支看起来是这样的&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/post/15393300560209.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;bug处理分支&quot;&gt;bug处理分支&lt;/h5&gt;

&lt;p&gt;在&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支工作，手头工作并未完成，不能提交，但是bug急修，这个时候，可以使用&lt;code class=&quot;highlighter-rouge&quot;&gt;stash&lt;/code&gt;先将工作区暂时“储藏”起来，等修复bug后再恢复&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git stash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;假定为修复线上bug，可从&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;分支创建临时分支&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout -b issus-101
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;bug修复完成后，合并分支到&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;，再切换回&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支，使用&lt;code class=&quot;highlighter-rouge&quot;&gt;stash&lt;/code&gt;恢复之前的工作区&lt;/p&gt;

&lt;p&gt;查看&lt;code class=&quot;highlighter-rouge&quot;&gt;stash&lt;/code&gt;挂起的任务&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git stash list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;恢复&lt;code class=&quot;highlighter-rouge&quot;&gt;stash&lt;/code&gt;任务&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 只恢复任务，挂起的任务还在list中
git stash apply stash@{0}

# 恢复的同时把stash挂起任务删除
git stash pop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;删除&lt;code class=&quot;highlighter-rouge&quot;&gt;stash list&lt;/code&gt;中任务&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git stash drop stash@{0}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h5 id=&quot;feature分支&quot;&gt;Feature分支&lt;/h5&gt;

&lt;p&gt;feature分支和bug分支的处理类似，但如果feature最终放弃，需要删除分支时，使用原来的分支将会报错，需要删除未合并的分支时，要使用&lt;code class=&quot;highlighter-rouge&quot;&gt;-D&lt;/code&gt;参数强行删除&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git branch -D feature-vulcan
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h5 id=&quot;多人协作&quot;&gt;多人协作&lt;/h5&gt;

&lt;p&gt;查看远程库信息&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote

# 详细信息
git remote -v
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;推送分支到远程库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 主分支
git push origin master

# 开发分支
git push origin dev

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;分支为主分支，需要时刻与远程同步&lt;/li&gt;
    &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步&lt;/li&gt;
    &lt;li&gt;bug和feature则按需求决定是否同步到远程&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h6 id=&quot;抓取分支&quot;&gt;抓取分支&lt;/h6&gt;

&lt;p&gt;从远程库&lt;code class=&quot;highlighter-rouge&quot;&gt;clone&lt;/code&gt;到本地时，默认只能看到&lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt;分支，如果需要再&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;等其它分支上开发，则必须创建&lt;code class=&quot;highlighter-rouge&quot;&gt;origin&lt;/code&gt;远程库的&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;分支到本地&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout -b dev origin/dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;如果&lt;code class=&quot;highlighter-rouge&quot;&gt;push&lt;/code&gt;更新到远程分支时发生冲突，则需要使用&lt;code class=&quot;highlighter-rouge&quot;&gt;git pull&lt;/code&gt;命令从远程拉取更新，在本地处理完冲突后，再用&lt;code class=&quot;highlighter-rouge&quot;&gt;git push origin &amp;lt;branch-name&amp;gt;&lt;/code&gt;命令&lt;code class=&quot;highlighter-rouge&quot;&gt;push&lt;/code&gt;到远程库&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;如果&lt;code class=&quot;highlighter-rouge&quot;&gt;git pull&lt;/code&gt;命令提示&lt;code class=&quot;highlighter-rouge&quot;&gt;no tracking information&lt;/code&gt;，则说明本地分支和远程分支的链接关系没有创建，用命令&lt;code class=&quot;highlighter-rouge&quot;&gt;git branch --set-upstream-to &amp;lt;branch-name&amp;gt; origin/&amp;lt;branch-name&amp;gt;&lt;/code&gt;解决&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;rebase变基&quot;&gt;Rebase（变基）&lt;/h5&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;rebase&lt;/code&gt;可以整理本地&lt;code class=&quot;highlighter-rouge&quot;&gt;commit&lt;/code&gt;的分叉，使之变成线性，而不再是“蜘蛛网”，&lt;code class=&quot;highlighter-rouge&quot;&gt;rebase&lt;/code&gt;只对尚未推送或分享给别人的本地修改执行变基操作清理历史，从不对已推送至别处的提交执行变基操作&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git rebase
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;tag-标签&quot;&gt;Tag (标签）&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;tag&lt;/code&gt;是版本库的一个快照，和&lt;code class=&quot;highlighter-rouge&quot;&gt;branch&lt;/code&gt;相似，但是不能像&lt;code class=&quot;highlighter-rouge&quot;&gt;branch&lt;/code&gt;一样移动&lt;/p&gt;

&lt;p&gt;基于当前分支创建新标签&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git tag v1.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;基于特定版本创建新标签&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git tag v0.9 f52c633

# 指定说明文字
git tag -a v0.1 -m &quot;version 0.1 released&quot; 1094adb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;查看所有标签&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git tag 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;查看某个标签的信息&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git show v0.9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;推送标签到远程库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git push origin v1.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;推送全部标签到远程库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git push origin --tags
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;删除本地标签&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git tag -d v0.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;删除远程标签&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 先在本地删除
git tag -d v0.9

# 远程删除
git push origin :refs/tags/v0.9
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;git高级&quot;&gt;Git高级&lt;/h2&gt;

&lt;h3 id=&quot;远程库操作&quot;&gt;远程库操作&lt;/h3&gt;

&lt;p&gt;删除远程库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote rm origin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;只删除了关联关系，并未删除远程数据&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;添加多个远程库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote add bitbucket git@bitbucket.org:Zrocky/git_test.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;只需在push时，选择相应的远程库即可&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;修改远程库名称&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git remote rename oldname newname
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;忽略文件&quot;&gt;忽略文件&lt;/h3&gt;

&lt;p&gt;有一些文件你不想上传至git仓库中，这个时候可以使用忽略功能，将需要忽略的文件标示给git。&lt;/p&gt;

&lt;p&gt;首先在Git工作区的根目录创建一个&lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt;文件，把需要忽略的文件名填写进去，git就会自动忽略这些文件。GitHub创建了一些可供参考的预设文件，我们可以直接拿来修改使用:&lt;a href=&quot;https://github.com/github/gitignore&quot;&gt;gitignore&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;忽略文件的原则是：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;忽略操作系统自动生成的文件，比如缩略图等；&lt;/li&gt;
  &lt;li&gt;忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如Java编译产生的.class文件；&lt;/li&gt;
  &lt;li&gt;忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;搭建git服务器&quot;&gt;搭建Git服务器&lt;/h3&gt;

&lt;p&gt;搭建Git服务器，需要准备一台运行Linux的机器，推荐使用Ubuntu或Debian&lt;/p&gt;

&lt;p&gt;第一步，安装&lt;code class=&quot;highlighter-rouge&quot;&gt;git&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;第二步，创建一个&lt;code class=&quot;highlighter-rouge&quot;&gt;git&lt;/code&gt;用户，用来运行&lt;code class=&quot;highlighter-rouge&quot;&gt;git&lt;/code&gt;服务：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo adduser git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;第三步，创建证书登录&lt;/p&gt;

&lt;p&gt;收集所有需要登录的用户的公钥，就是他们自己的id_rsa.pub文件，把所有公钥导入到/home/git/.ssh/authorized_keys文件里，一行一个。&lt;/p&gt;

&lt;p&gt;第四部，初始化Git仓库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo git init --bare sample.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Git就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的Git仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的Git仓库通常都以.git结尾。然后，把owner改为git：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo chown -R git:git sample.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;第五步，禁用shell登录&lt;/p&gt;

&lt;p&gt;出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过编辑/etc/passwd文件完成。找到类似下面的一行：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git:x:1001:1001:,,,:/home/git:/bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;改为&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;第六步，克隆远程仓库&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone git@server:/srv/sample.git 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;管理公钥&quot;&gt;管理公钥&lt;/h4&gt;

&lt;p&gt;如果团队成员比较多，可以使用&lt;a href=&quot;https://github.com/res0nat0r/gitosis&quot;&gt;Gitosis&lt;/a&gt;管理公钥&lt;/p&gt;

&lt;h4 id=&quot;管理权限&quot;&gt;管理权限&lt;/h4&gt;

&lt;p&gt;Git本身不支持权限控制，不过Git支持hook，所有可以在服务器端编写脚本实现权限控制，使用&lt;a href=&quot;https://github.com/sitaramc/gitolite&quot;&gt;Gitolite&lt;/a&gt;可以实现这个功能&lt;/p&gt;

</description>
        <pubDate>Mon, 15 Oct 2018 22:26:19 +0800</pubDate>
        <link>http://zrocky.com/2018/10/how-to-use-git/</link>
        <guid isPermaLink="true">http://zrocky.com/2018/10/how-to-use-git/</guid>
        
        <category>Git</category>
        
        
        <category>Tech</category>
        
      </item>
    
  </channel>
</rss>
